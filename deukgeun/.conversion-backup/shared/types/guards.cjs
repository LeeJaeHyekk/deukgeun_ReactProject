// ============================================================================
// 타입 가드 및 런타임 검증 로직
// ============================================================================