{"key":"c812c7e26d72f8bae6958aafb2f9cb8d","result":"const React = require('react').default\r\nconst { useTabState  } = require('../../../hooks/useWorkoutStore')\r\nconst { useSharedState  } = require('../../../hooks/useWorkoutStore')\r\nimport type { WorkoutPlan } from \"../../../../../../shared/types/common\"\r\nimport type { PlansTabState } from \"../../../types\"\r\nconst { PlansContent  } = require('./components/PlansContent')\r\nconst { PlansStats  } = require('./components/PlansStats')\r\nconst { usePlansActions  } = require('./hooks/usePlansActions')\r\nconst styles = require('./PlansTab.module.css').default\r\n\r\n// ë¡œê¹… ìœ í‹¸ë¦¬í‹°\r\nconst logger = {\r\n  info: (message: string, data?: any) => {\r\n    if (process.env.DEV) {\r\n      console.log(`[PlansTab] ${message}`, data || \"\")\r\n    }\r\n  },\r\n  debug: (message: string, data?: any) => {\r\n    if (process.env.DEV) {\r\n      console.debug(`[PlansTab] ${message}`, data || \"\")\r\n    }\r\n  },\r\n  warn: (message: string, data?: any) => {\r\n    console.warn(`[PlansTab] ${message}`, data || \"\")\r\n  },\r\n  error: (message: string, data?: any) => {\r\n    console.error(`[PlansTab] ${message}`, data || \"\")\r\n  },\r\n}\r\n\r\ninterface PlansTabProps {\r\n  plans: WorkoutPlan[]\r\n  isLoading: boolean\r\n  onCreatePlan: () => void\r\n  onEditPlan: (planId: number) => void\r\n  onStartSession: (planId: number) => void\r\n  onDeletePlan: (planId: number) => void\r\n}\r\n\r\nexport function PlansTab({\r\n  plans,\r\n  isLoading,\r\n  onCreatePlan,\r\n  onEditPlan,\r\n  onStartSession,\r\n  onDeletePlan,\r\n}: PlansTabProps) {\r\n  // íƒ­ë³„ ìƒíƒœ ê´€ë¦¬\r\n  const { tabState, updateTabState } = useTabState(\"plans\")\r\n  const plansTabState = tabState as PlansTabState\r\n\r\n  // ê³µìœ  ìƒíƒœ í›…\r\n  const { sharedState } = useSharedState()\r\n\r\n  const { handleDeletePlan } = usePlansActions(() => {\r\n    // ì‚­ì œ ì™„ë£Œ í›„ ì¶”ê°€ ì‘ì—…ì´ í•„ìš”í•˜ë©´ ì—¬ê¸°ì— ì¶”ê°€\r\n  })\r\n\r\n  logger.info(\"PlansTab ë Œë”ë§\", {\r\n    plansCount: plans.length,\r\n    isLoading,\r\n    filterStatus: plansTabState.filterStatus,\r\n    sortBy: plansTabState.sortBy,\r\n    viewMode: plansTabState.viewMode,\r\n    selectedPlanId: plansTabState.selectedPlanId,\r\n  })\r\n\r\n  // í•„í„°ë§ëœ ê³„íš ëª©ë¡\r\n  const filteredPlans = React.useMemo(() => {\r\n    let filtered = plans\r\n\r\n    // ìƒíƒœë³„ í•„í„°ë§\r\n    if (plansTabState.filterStatus !== \"all\") {\r\n      filtered = filtered.filter(plan => {\r\n        // ì—¬ê¸°ì— í•„í„°ë§ ë¡œì§ ì¶”ê°€\r\n        return true\r\n      })\r\n    }\r\n\r\n    // ì •ë ¬ (ìµœì‹ ìˆœìœ¼ë¡œ ê¸°ë³¸ ì •ë ¬)\r\n    filtered.sort((a, b) => {\r\n      switch (plansTabState.sortBy) {\r\n        case \"createdAt\":\r\n          return (\r\n            new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\r\n          )\r\n        case \"name\":\r\n          return a.name.localeCompare(b.name)\r\n        case \"difficulty\":\r\n          const difficultyOrder: Record<string, number> = {\r\n            ì‰¬ì›€: 1,\r\n            ë³´í†µ: 2,\r\n            ì–´ë ¤ì›€: 3,\r\n          }\r\n          return (\r\n            (difficultyOrder[a.difficulty] || 0) -\r\n            (difficultyOrder[b.difficulty] || 0)\r\n          )\r\n        default:\r\n          // ê¸°ë³¸ê°’: ìµœì‹ ìˆœ\r\n          return (\r\n            new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\r\n          )\r\n      }\r\n    })\r\n\r\n    return filtered\r\n  }, [plans, plansTabState.filterStatus, plansTabState.sortBy])\r\n\r\n  const handleSortChange = (sortBy: \"createdAt\" | \"name\" | \"difficulty\") => {\r\n    updateTabState({ sortBy })\r\n  }\r\n\r\n  const handleViewModeChange = (viewMode: \"grid\" | \"list\") => {\r\n    updateTabState({ viewMode })\r\n  }\r\n\r\n  const handlePlanSelect = (planId: number | null) => {\r\n    updateTabState({ selectedPlanId: planId })\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className={styles.plansTab}>\r\n        <div className={styles.loadingContainer}>\r\n          <div className={styles.loadingSpinner}></div>\r\n          <p>ê³„íšì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={styles.plansTab}>\r\n      {/* í—¤ë” ì„¹ì…˜ */}\r\n      <div className={styles.plansHeader}>\r\n        <div className={styles.plansHeaderContent}>\r\n          <h2>ğŸ“‹ ìš´ë™ ê³„íš</h2>\r\n          <p>ìš´ë™ ê³„íšì„ ë§Œë“¤ê³  ê´€ë¦¬í•˜ì„¸ìš”</p>\r\n        </div>\r\n        <button className={styles.createPlanBtn} onClick={onCreatePlan}>\r\n          <span className={styles.icon}>+</span>ìƒˆ ê³„íš\r\n        </button>\r\n      </div>\r\n\r\n      {/* ì»¨íŠ¸ë¡¤ ì„¹ì…˜ */}\r\n      <div className={styles.plansControls}>\r\n        <div className={styles.controlSection}>\r\n          <div className={styles.sortButtons}>\r\n            <button\r\n              className={`${styles.sortBtn} ${plansTabState.sortBy === \"createdAt\" ? styles.active : \"\"}`}\r\n              onClick={() => handleSortChange(\"createdAt\")}\r\n            >\r\n              ìµœì‹ ìˆœ\r\n            </button>\r\n            <button\r\n              className={`${styles.sortBtn} ${plansTabState.sortBy === \"name\" ? styles.active : \"\"}`}\r\n              onClick={() => handleSortChange(\"name\")}\r\n            >\r\n              ì´ë¦„ìˆœ\r\n            </button>\r\n            <button\r\n              className={`${styles.sortBtn} ${plansTabState.sortBy === \"difficulty\" ? styles.active : \"\"}`}\r\n              onClick={() => handleSortChange(\"difficulty\")}\r\n            >\r\n              ë‚œì´ë„ìˆœ\r\n            </button>\r\n          </div>\r\n          <div className={styles.viewModeToggle}>\r\n            <button\r\n              className={`${styles.viewModeBtn} ${plansTabState.viewMode === \"grid\" ? styles.active : \"\"}`}\r\n              onClick={() => handleViewModeChange(\"grid\")}\r\n            >\r\n              ê·¸ë¦¬ë“œ\r\n            </button>\r\n            <button\r\n              className={`${styles.viewModeBtn} ${plansTabState.viewMode === \"list\" ? styles.active : \"\"}`}\r\n              onClick={() => handleViewModeChange(\"list\")}\r\n            >\r\n              ë¦¬ìŠ¤íŠ¸\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ìµœê·¼ ì—…ë°ì´íŠ¸ëœ ê³„íš í‘œì‹œ */}\r\n      {sharedState.lastUpdatedPlan && (\r\n        <div className={styles.recentUpdate}>\r\n          <h4>ìµœê·¼ í™œë™</h4>\r\n          <div\r\n            className={styles.updateItem}\r\n            onClick={() => onEditPlan(sharedState.lastUpdatedPlan!.id)}\r\n          >\r\n            <span className={styles.planName}>\r\n              {sharedState.lastUpdatedPlan.name}\r\n            </span>\r\n            <span className={styles.planDifficulty}>\r\n              {sharedState.lastUpdatedPlan.difficulty}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ê³„íš ëª©ë¡ */}\r\n      {filteredPlans.length > 0 ? (\r\n        <div className={styles.plansSection}>\r\n          <div className={styles.sectionHeader}>\r\n            <h3>ğŸ“‹ ìš´ë™ ê³„íš ({filteredPlans.length}ê°œ)</h3>\r\n            <p>ì„¤ì •í•œ ìš´ë™ ê³„íšë“¤ì„ í™•ì¸í•˜ì„¸ìš”</p>\r\n          </div>\r\n          <PlansContent\r\n            plans={filteredPlans}\r\n            viewMode={plansTabState.viewMode}\r\n            onCreatePlan={onCreatePlan}\r\n            onEditPlan={onEditPlan}\r\n            onDeletePlan={handleDeletePlan}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <div className={styles.noPlansContainer}>\r\n          <div className={styles.noPlansIcon}>ğŸ“‹</div>\r\n          <h3>ì•„ì§ ìš´ë™ ê³„íšì´ ì—†ìŠµë‹ˆë‹¤</h3>\r\n          <p>ì²« ë²ˆì§¸ ìš´ë™ ê³„íšì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>\r\n          <button className={styles.createFirstPlanBtn} onClick={onCreatePlan}>\r\n            ì²« ê³„íš ë§Œë“¤ê¸°\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* í†µê³„ */}\r\n      {plans.length > 0 && <PlansStats plans={plans as any} />}\r\n    </div>\r\n  )\r\n}\r\n","timestamp":1759820789625}