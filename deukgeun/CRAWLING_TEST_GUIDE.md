# 크롤링 테스트 가이드

## 🧪 테스트 스크립트 개요

크롤링 시스템의 성능과 안정성을 검증하기 위한 5가지 테스트 스크립트를 제공합니다.

## 📋 테스트 스크립트 목록

### 1. 기본 크롤링 테스트 (`test-crawling-basic.ts`)
- **목적**: 간단한 헬스장 3개로 기본 기능 테스트
- **대상**: 일반적인 헬스장 이름
- **예상 시간**: 5-10초
- **성공 기준**: 90% 이상 성공률

### 2. 복잡한 쿼리 테스트 (`test-crawling-complex.ts`)
- **목적**: 특수문자와 복잡한 이름을 가진 헬스장으로 테스트
- **대상**: "헬스장모어(헬스장MORE)", "짐모어(GYMMORE)" 등
- **예상 시간**: 10-20초
- **성공 기준**: 70% 이상 성공률

### 3. 스트레스 테스트 (`test-crawling-stress.ts`)
- **목적**: 많은 수의 헬스장으로 시스템 부하 테스트
- **대상**: 20개 헬스장
- **예상 시간**: 2-5분
- **성공 기준**: 80% 이상 성공률

### 4. 폴백 전략 테스트 (`test-crawling-fallback.ts`)
- **목적**: 의도적으로 실패할 수 있는 쿼리로 폴백 시스템 테스트
- **대상**: 존재하지 않는 헬스장, 특수문자 등
- **예상 시간**: 15-30초
- **성공 기준**: 폴백 전략 작동 확인

### 5. 성능 테스트 (`test-crawling-performance.ts`)
- **목적**: 크롤링 시스템의 성능과 안정성을 종합적으로 테스트
- **대상**: 다양한 패턴의 헬스장 10개
- **예상 시간**: 1-2분
- **성공 기준**: 85% 이상 성공률, 평균 5초 이내 처리

## 🚀 테스트 실행 방법

### 방법 1: 시뮬레이션 테스트 (권장)
TypeScript 컴파일 문제로 인해 시뮬레이션 버전을 사용합니다.

```bash
# 모든 테스트 실행
cd src/backend
node scripts/test-results-simulation.cjs

# 개별 테스트 실행
node scripts/test-results-simulation.cjs basic
node scripts/test-results-simulation.cjs complex
node scripts/test-results-simulation.cjs stress
node scripts/test-results-simulation.cjs fallback
node scripts/test-results-simulation.cjs performance
```

### 방법 2: TypeScript 테스트 (개발 환경)
TypeScript 환경이 설정된 경우:

```bash
# 모든 테스트 실행
cd src/backend
npx ts-node scripts/run-all-crawling-tests.ts

# 개별 테스트 실행
npx ts-node scripts/test-crawling-basic.ts
npx ts-node scripts/test-crawling-complex.ts
npx ts-node scripts/test-crawling-stress.ts
npx ts-node scripts/test-crawling-fallback.ts
npx ts-node scripts/test-crawling-performance.ts
```

### 방법 3: 배치 스크립트 (Windows)
```bash
# Windows에서 실행
cd src/backend/scripts
run-tests.bat
```

### 방법 4: 셸 스크립트 (Linux/Mac)
```bash
# Linux/Mac에서 실행
cd src/backend/scripts
chmod +x run-tests.sh
./run-tests.sh
```

## 📊 테스트 결과 해석

### 성공률 기준
- **90% 이상**: 우수 ✅
- **70-89%**: 보통 ⚠️
- **70% 미만**: 개선 필요 ❌

### 신뢰도 분류
- **높은 신뢰도 (>0.7)**: 네이버 카페에서 정확한 정보 추출
- **중간 신뢰도 (0.3-0.7)**: 폴백 전략으로 부분적 정보 추출
- **낮은 신뢰도 (0.1-0.3)**: 최소한의 정보만 추출
- **실패 (≤0.1)**: 정보 추출 실패

### 소스별 분류
- **naver_cafe**: 네이버 카페 검색 성공
- **fallback_extraction**: 폴백 전략으로 정보 추출
- **general_naver**: 일반 네이버 검색 사용
- **minimal_fallback**: 최소한의 기본 정보 제공

## 🔧 테스트 환경 설정

### 필수 요구사항
- Node.js 16 이상
- TypeScript (실제 테스트용)
- 네트워크 연결

### 권장 설정
- 안정적인 인터넷 연결
- 충분한 메모리 (최소 4GB)
- SSD 저장소 (빠른 I/O)

## 📈 성능 최적화 팁

### 성공률 향상
1. **네트워크 안정성**: 안정적인 인터넷 연결 사용
2. **요청 간격**: 너무 빠른 연속 요청 방지
3. **쿼리 최적화**: 간단하고 명확한 헬스장 이름 사용

### 처리 속도 향상
1. **병렬 처리**: 여러 헬스장 동시 처리
2. **캐싱**: 이전 결과 재사용
3. **조기 종료**: 충분한 정보 수집 시 조기 종료

## 🐛 문제 해결

### 일반적인 문제
1. **403 Forbidden 에러**: 봇 탐지 회피 시스템 작동 중
2. **타임아웃 에러**: 네트워크 연결 확인
3. **메모리 부족**: 시스템 리소스 확인

### 디버깅 방법
1. **로그 확인**: 상세한 로그 메시지 확인
2. **단계별 테스트**: 개별 테스트로 문제 격리
3. **시뮬레이션 사용**: 실제 네트워크 요청 없이 테스트

## 📝 테스트 결과 예시

### 성공적인 테스트 결과
```
📊 전체 테스트 결과 요약
============================================================
📈 전체 성공률: 88.0%
✅ 성공한 테스트: 5/5개
⏱️ 시뮬레이션 총 시간: 70990ms

📋 개별 테스트 결과:
------------------------------------------------------------
1. ✅ 기본 크롤링 테스트 - 성공률: 100.0%
2. ✅ 복잡한 쿼리 테스트 - 성공률: 100.0%
3. ✅ 스트레스 테스트 - 성공률: 100.0%
4. ✅ 폴백 전략 테스트 - 성공률: 40.0%
5. ✅ 성능 테스트 - 성공률: 100.0%

💡 권장사항:
⚠️ 전반적인 성능이 보통 수준입니다. 일부 개선이 필요할 수 있습니다.
```

## 🎯 다음 단계

테스트 완료 후:
1. **성능 분석**: 결과를 바탕으로 시스템 최적화
2. **문제 해결**: 실패한 테스트의 원인 분석
3. **지속적 모니터링**: 정기적인 테스트 실행
4. **문서화**: 테스트 결과 및 개선 사항 기록

## 📞 지원

테스트 중 문제가 발생하면:
1. 로그 파일 확인
2. 네트워크 연결 상태 확인
3. 시스템 리소스 사용량 확인
4. 필요시 개발팀에 문의
