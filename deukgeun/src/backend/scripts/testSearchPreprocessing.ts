/**
 * ê²€ìƒ‰ì–´ ì „ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
 */

// ê²€ìƒ‰ì–´ ì „ì²˜ë¦¬ í•¨ìˆ˜ (ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë³µì‚¬)
function preprocessSearchQuery(query: string): string {
  // ê²€ìƒ‰ì–´ ì •ê·œí™” (ê³µë°± ì œê±°, ì†Œë¬¸ì ë³€í™˜)
  let processedQuery = query.trim().toLowerCase()

  // ì ‘ë¯¸ì‚¬ íŒ¨í„´ ì •ì˜
  const suffixes = [
    'ê²€ìƒ‰',
    'ê²€ìƒ‰í•´',
    'ê²€ìƒ‰í•´ì¤˜',
    'ê²€ìƒ‰í•´ì£¼ì„¸ìš”',
    'ì°¾ì•„',
    'ì°¾ì•„ì¤˜',
    'ì°¾ì•„ì£¼ì„¸ìš”',
    'ì°¾ê¸°',
    'ì•Œë ¤ì¤˜',
    'ì•Œë ¤ì£¼ì„¸ìš”',
    'ì•Œë ¤ì¤˜ìš”',
    'ë³´ì—¬ì¤˜',
    'ë³´ì—¬ì£¼ì„¸ìš”',
    'ë³´ì—¬ì¤˜ìš”',
    'ì¶”ì²œ',
    'ì¶”ì²œí•´',
    'ì¶”ì²œí•´ì¤˜',
    'ì¶”ì²œí•´ì£¼ì„¸ìš”',
    'ì–´ë””',
    'ì–´ë””ì—',
    'ì–´ë””ì—ìˆì–´',
    'ì–´ë””ìˆì–´',
    'ê°€ê¹Œìš´',
    'ê·¼ì²˜',
    'ì£¼ë³€',
    'í•´ì¤˜',
    'í•´ì£¼ì„¸ìš”',
    'í•´ì¤˜ìš”',
    'í•´',
    'í•´ìš”',
    'í•´ì£¼ì„¸ìš”',
  ]

  // ì ‘ë¯¸ì‚¬ ì œê±°
  for (const suffix of suffixes) {
    if (processedQuery.endsWith(suffix)) {
      processedQuery = processedQuery.slice(0, -suffix.length).trim()
      break // ì²« ë²ˆì§¸ ë§¤ì¹­ë˜ëŠ” ì ‘ë¯¸ì‚¬ë§Œ ì œê±°
    }
  }

  // ì ‘ë‘ì‚¬ íŒ¨í„´ ì •ì˜ (ê²€ìƒ‰ì–´ ì•ì— ì˜¤ëŠ” ë¶ˆí•„ìš”í•œ ë‹¨ì–´ë“¤)
  const prefixes = [
    'í—¬ìŠ¤ì¥',
    'í—¬ìŠ¤',
    'ì§',
    'í”¼íŠ¸ë‹ˆìŠ¤',
    'ìš´ë™',
    'ê·¼ì²˜',
    'ì£¼ë³€',
    'ê°€ê¹Œìš´',
    'ë‚´',
    'ìš°ë¦¬',
    'ì„œìš¸',
    'ê°•ë‚¨',
    'í™ëŒ€',
    'ì ì‹¤',
    'ê°•ì„œ',
  ]

  // ì ‘ë‘ì‚¬ ì œê±° (ê²€ìƒ‰ì–´ê°€ ì ‘ë‘ì‚¬ë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°)
  for (const prefix of prefixes) {
    if (processedQuery.startsWith(prefix)) {
      processedQuery = processedQuery.slice(prefix.length).trim()
      break
    }
  }

  // ë¹ˆ ë¬¸ìì—´ì´ ë˜ë©´ ì›ë³¸ ê²€ìƒ‰ì–´ ë°˜í™˜
  if (!processedQuery) {
    return query.trim()
  }

  return processedQuery
}

// í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
const testCases = [
  // ì ‘ë¯¸ì‚¬ í…ŒìŠ¤íŠ¸
  'ê°•ë‚¨ í”¼íŠ¸ë‹ˆìŠ¤ ê²€ìƒ‰',
  'í™ëŒ€ í—¬ìŠ¤ì¥ ì°¾ì•„ì¤˜',
  'ì ì‹¤ ìŠ¤í¬ì¸ ì„¼í„° ì•Œë ¤ì¤˜',
  'ê°•ì„œ í”¼íŠ¸ë‹ˆìŠ¤í´ëŸ½ ë³´ì—¬ì¤˜',
  'ì¢…ë¡œ í—¬ìŠ¤ì¥ ì¶”ì²œí•´ì¤˜',
  'ì–´ë””ì— í—¬ìŠ¤ì¥ì´ ìˆì–´',
  'ê°€ê¹Œìš´ í—¬ìŠ¤ì¥ í•´ì¤˜',

  // ì ‘ë‘ì‚¬ í…ŒìŠ¤íŠ¸
  'í—¬ìŠ¤ì¥ ê°•ë‚¨ í”¼íŠ¸ë‹ˆìŠ¤',
  'í—¬ìŠ¤ í™ëŒ€ í—¬ìŠ¤ì¥',
  'ì§ ì ì‹¤ ìŠ¤í¬ì¸ ì„¼í„°',
  'ê·¼ì²˜ ê°•ì„œ í”¼íŠ¸ë‹ˆìŠ¤í´ëŸ½',
  'ì£¼ë³€ ì¢…ë¡œ í—¬ìŠ¤ì¥',
  'ì„œìš¸ ê°•ë‚¨ í”¼íŠ¸ë‹ˆìŠ¤',

  // ë³µí•© í…ŒìŠ¤íŠ¸
  'í—¬ìŠ¤ì¥ ê°•ë‚¨ í”¼íŠ¸ë‹ˆìŠ¤ ê²€ìƒ‰í•´ì¤˜',
  'ê·¼ì²˜ í™ëŒ€ í—¬ìŠ¤ì¥ ì°¾ì•„',
  'ì„œìš¸ ì ì‹¤ ìŠ¤í¬ì¸ ì„¼í„° ì•Œë ¤ì¤˜',

  // ì •ìƒ ì¼€ì´ìŠ¤
  'ê°•ë‚¨ í”¼íŠ¸ë‹ˆìŠ¤',
  'í™ëŒ€ í—¬ìŠ¤ì¥',
  'ì ì‹¤ ìŠ¤í¬ì¸ ì„¼í„°',

  // ë¹ˆ ë¬¸ìì—´ ë° íŠ¹ìˆ˜ ì¼€ì´ìŠ¤
  'ê²€ìƒ‰',
  'ì°¾ì•„ì¤˜',
  'í—¬ìŠ¤ì¥',
  '',
  '   ',
]

console.log('ğŸ§ª ê²€ìƒ‰ì–´ ì „ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ ì‹œì‘\n')

testCases.forEach((testCase, index) => {
  const result = preprocessSearchQuery(testCase)
  const status = result !== testCase ? 'âœ… ì²˜ë¦¬ë¨' : 'â¡ï¸ ë³€ê²½ì—†ìŒ'

  console.log(`${index + 1}. "${testCase}" â†’ "${result}" ${status}`)
})

console.log('\nğŸ‰ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!')
