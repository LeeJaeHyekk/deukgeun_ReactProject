{
  "level_system": {
    "exp_rules": {
      "daily_exp_cap": 500,
      "action_type_limits": {
        "checkin": {
          "exp": 10,
          "cooldown_sec": 86400
        },
        "post": {
          "exp": 20,
          "min_length": 50,
          "cooldown_sec": 300,
          "content_validation_score": {
            "enabled": true,
            "min_score": 0.5,
            "weight": 1.2,
            "note": "ì´ˆê¸°ì—ëŠ” ë£° ê¸°ë°˜ í•„í„°ë§, AI/ML ê¸°ë°˜ í’ˆì§ˆ í‰ê°€ ì ì§„ ë„ì… ê¶Œì¥",
            "implementation_plan": {
              "phase_1": "ë£° ê¸°ë°˜ í•„í„°ë§(ê¸ˆì¹™ì–´, ê¸€ììˆ˜ ë“±)",
              "phase_2": "ê°„ë‹¨í•œ ML ëª¨ë¸ ì ìš©",
              "phase_3": "ê³ ë„í™”ëœ AI ê¸°ë°˜ ì‹¤ì‹œê°„ ì ìˆ˜ ì‚°ì¶œ"
            }
          }
        },
        "comment": {
          "exp": 5,
          "min_length": 10,
          "cooldown_sec": 60,
          "content_validation_score": {
            "enabled": true,
            "min_score": 0.5,
            "weight": 1.0,
            "note": "ì´ˆê¸°ì—ëŠ” ë£° ê¸°ë°˜ í•„í„°ë§, AI/ML ê¸°ë°˜ í’ˆì§ˆ í‰ê°€ ì ì§„ ë„ì… ê¶Œì¥",
            "implementation_plan": {
              "phase_1": "ë£° ê¸°ë°˜ í•„í„°ë§(ê¸ˆì¹™ì–´, ê¸€ììˆ˜ ë“±)",
              "phase_2": "ê°„ë‹¨í•œ ML ëª¨ë¸ ì ìš©",
              "phase_3": "ê³ ë„í™”ëœ AI ê¸°ë°˜ ì‹¤ì‹œê°„ ì ìˆ˜ ì‚°ì¶œ"
            }
          }
        },
        "like": {
          "exp": 2,
          "cooldown_sec": 5,
          "decay_formula": {
            "enabled": true,
            "type": "adaptive",
            "decay_rate": 0.2,
            "threshold_count": 5,
            "note": "ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ ê¸°ë°˜ ì ì‘í˜• ê°ì‡  ëª¨ë¸ ë„ì…",
            "parameters": {
              "min_decay_rate": 0.05,
              "max_decay_rate": 0.5,
              "pattern_analysis_period_sec": 3600
            }
          }
        },
        "mission": {
          "exp": 30,
          "cooldown_sec": 86400,
          "types": ["daily", "weekly", "achievement"],
          "bonus_multiplier": {
            "daily": 1.0,
            "weekly": 1.5,
            "achievement": 2.0
          }
        },
        "workout_log": {
          "exp": 15,
          "cooldown_sec": 3600,
          "min_duration_minutes": 10,
          "quality_bonus": {
            "enabled": true,
            "intensity_bonus": 0.2,
            "consistency_bonus": 0.1
          }
        },
        "gym_visit": {
          "exp": 25,
          "cooldown_sec": 86400,
          "checkin_required": true,
          "location_validation": true
        }
      },
      "server_side_validation": true,
      "note": "ëª¨ë“  ê²½í—˜ì¹˜ ë¶€ì—¬ ë¡œì§ì€ ì„œë²„ì—ì„œ ì—„ê²©í•˜ê²Œ ê²€ì¦"
    },
    "level_curve": {
      "formula": "required_exp = floor(100 * pow(level, 1.5))",
      "max_level": 100,
      "tuning_required": true,
      "hybrid_model": {
        "enabled": true,
        "stages": [
          {
            "level_range": [1, 10],
            "formula": "linear",
            "base_exp": 100,
            "increment": 50,
            "description": "ì‹ ê·œ ìœ ì € ì¹œí™”ì  ì„ í˜• ì¦ê°€"
          },
          {
            "level_range": [11, 50],
            "formula": "exponential",
            "base_exp": 600,
            "multiplier": 1.3,
            "description": "ì¤‘ê°„ ë ˆë²¨ ì§€ìˆ˜ì  ì¦ê°€"
          },
          {
            "level_range": [51, 100],
            "formula": "logarithmic",
            "base_exp": 5000,
            "log_base": 1.1,
            "description": "ê³ ë ˆë²¨ ì™„ë§Œí•œ ì¦ê°€"
          }
        ],
        "note": "ë ˆë²¨ì—… ë‚œì´ë„ ë°¸ëŸ°ì‹±ì„ ìœ„í•œ í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸ ì ìš©, ìµœëŒ€ë ˆë²¨ í™•ì¥"
      },
      "simulation_tool": {
        "enabled": true,
        "url": "https://example.com/level-curve-simulator",
        "note": "ë ˆë²¨ ê³¡ì„  íŠœë‹ê³¼ ì‹œë®¬ë ˆì´ì…˜ ì§€ì› íˆ´"
      },
      "level_progression_example": {
        "level_1_to_10": "100, 150, 200, 250, 300, 350, 400, 450, 500, 550",
        "level_11_to_20": "600, 780, 1014, 1318, 1713, 2227, 2895, 3764, 4893, 6361",
        "note": "ê° êµ¬ê°„ë³„ ì˜ˆìƒ ê²½í—˜ì¹˜ ìš”êµ¬ëŸ‰"
      }
    },
    "rewards": {
      "prevent_duplicates": true,
      "grant_check_before_insert": true,
      "types": ["points", "badge", "item", "feature_unlock"],
      "unlock_features_safeguard": {
        "enabled": true,
        "logic_description": "ê¸°ëŠ¥ ì œí•œ í•´ì œ ì‹œ ì‚¬ìš©ì ê¶Œí•œ ë° ì¡°ê±´ ê²€ì¦ ë¡œì§ ê°•í™”",
        "note": "ë¶€ì ì ˆ ì ‘ê·¼ ì°¨ë‹¨ì„ ìœ„í•œ ì„¸ë¶€ ì •ì±… ìˆ˜ë¦½ í•„ìš”"
      },
      "schedule_source": {
        "type": "dynamic",
        "location": "database",
        "note": "ë³´ìƒ ìŠ¤ì¼€ì¤„ì„ DBì—ì„œ ë™ì ìœ¼ë¡œ ê´€ë¦¬í•˜ì—¬ ìš´ì˜ ìœ ì—°ì„± í™•ë³´"
      },
      "default_schedule": [
        {
          "level": 5,
          "reward_type": "badge",
          "reward_id": "beginner_badge",
          "description": "ì´ˆë³´ì ë±ƒì§€",
          "icon": "ğŸ¥‰"
        },
        {
          "level": 10,
          "reward_type": "feature_unlock",
          "reward_id": "premium_board_access",
          "description": "í”„ë¦¬ë¯¸ì—„ ê²Œì‹œíŒ ì ‘ê·¼",
          "feature_name": "premium_community"
        },
        {
          "level": 20,
          "reward_type": "badge",
          "reward_id": "intermediate_badge",
          "description": "ì¤‘ê¸‰ì ë±ƒì§€",
          "icon": "ğŸ¥ˆ"
        },
        {
          "level": 30,
          "reward_type": "points",
          "reward_id": "level_30_bonus",
          "description": "ë ˆë²¨ 30 ë‹¬ì„± ë³´ë„ˆìŠ¤ í¬ì¸íŠ¸",
          "amount": 1000
        },
        {
          "level": 50,
          "reward_type": "badge",
          "reward_id": "expert_badge",
          "description": "ì „ë¬¸ê°€ ë±ƒì§€",
          "icon": "ğŸ¥‡"
        },
        {
          "level": 100,
          "reward_type": "badge",
          "reward_id": "master_badge",
          "description": "ë§ˆìŠ¤í„° ë±ƒì§€",
          "icon": "ğŸ‘‘"
        }
      ],
      "note": "ë³´ìƒ ê´€ë¦¬ ë™ì í™” ë° ì¤‘ë³µ ì§€ê¸‰ ë°©ì§€"
    },
    "milestones": {
      "types": ["level", "streak", "total_exp", "special_event", "achievement"],
      "check_frequency": "on_action",
      "duplicate_block": true,
      "allow_duplicate_count": {
        "enabled": true,
        "default_count": 1,
        "special_cases": {
          "special_event": 3
        },
        "note": "ë§ˆì¼ìŠ¤í†¤ ë³´ìƒ ì¤‘ë³µ íšŸìˆ˜ ì œí•œ ê¸°ëŠ¥ ë„ì…"
      },
      "definitions": {
        "streak": {
          "login_streak": {
            "thresholds": [7, 30, 100, 365],
            "rewards": [
              "streak_badge_7",
              "streak_badge_30",
              "streak_badge_100",
              "streak_badge_365"
            ]
          },
          "workout_streak": {
            "thresholds": [7, 30, 100],
            "rewards": [
              "workout_streak_badge_7",
              "workout_streak_badge_30",
              "workout_streak_badge_100"
            ]
          }
        },
        "total_exp": {
          "thresholds": [1000, 5000, 10000, 50000, 100000],
          "rewards": [
            "exp_milestone_1k",
            "exp_milestone_5k",
            "exp_milestone_10k",
            "exp_milestone_50k",
            "exp_milestone_100k"
          ]
        },
        "achievement": {
          "first_post": {
            "condition": "post_count >= 1",
            "reward": "first_post_badge"
          },
          "helpful_user": {
            "condition": "likes_received >= 100",
            "reward": "helpful_user_badge"
          },
          "gym_explorer": {
            "condition": "gyms_visited >= 5",
            "reward": "gym_explorer_badge"
          }
        }
      },
      "note": "ì¤‘ë³µ ì§€ê¸‰ ë° ì˜ˆì™¸ ì¼€ì´ìŠ¤ ì„¸ë°€ ì œì–´"
    },
    "data_management": {
      "exp_history_partition": "monthly",
      "archive_old_records_after_months": 12,
      "queue_updates": true,
      "use_cache_for_realtime": true,
      "concurrency_control": {
        "enabled": true,
        "strategy": "optimistic_locking",
        "retry_policy": {
          "max_retries": 3,
          "retry_delay_ms": 200,
          "note": "ë½ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë¡œì§ í¬í•¨"
        },
        "note": "ë™ì‹œì„± ë¬¸ì œ ë°©ì§€ ë° ì•ˆì •ì„± í™•ë³´"
      },
      "sharding_strategy": {
        "enabled": true,
        "type": "hash_by_user_id",
        "shard_count": "dynamic",
        "auto_scaling": true,
        "scaling_policy": {
          "max_shards": 50,
          "scale_up_threshold": 0.8,
          "scale_down_threshold": 0.2
        },
        "note": "íŠ¸ë˜í”½ ì¦ê°€ì— ë”°ë¥¸ ìƒ¤ë”© ë™ì  í™•ì¥ ì§€ì›"
      },
      "note": "DB ì„±ëŠ¥ ë° ë°ì´í„° ì¼ê´€ì„± ê´€ë¦¬ ê°•í™”"
    },
    "security": {
      "rate_limit_per_ip": {
        "window_sec": 60,
        "max_requests": 30
      },
      "token_validation_required": true,
      "server_only_exp_calculation": true,
      "unusual_behavior_detection": {
        "enabled": true,
        "anomaly_threshold_per_min": 20,
        "detection_methods": [
          "rate_limiting",
          "pattern_analysis",
          "device_fingerprinting"
        ],
        "action_on_detection": [
          "temporary_suspension",
          "warning",
          "captcha_challenge"
        ],
        "note": "ë¹„ì •ìƒ í™œë™ íƒì§€ ë° ë‹¤ë‹¨ê³„ ëŒ€ì‘ ì²´ê³„"
      },
      "input_validation": {
        "enabled": true,
        "content_filtering": {
          "enabled": true,
          "blocked_words": ["spam", "advertisement", "illegal"],
          "max_length": {
            "post": 5000,
            "comment": 1000
          }
        },
        "sql_injection_prevention": true,
        "xss_prevention": true
      },
      "audit_logging": {
        "enabled": true,
        "log_levels": ["security", "exp_grant", "reward_claim"],
        "retention_days": 90
      },
      "note": "API í˜¸ì¶œì— ëŒ€í•œ ì—„ê²©í•œ ì¸ì¦ ë° ë³´ì•ˆ ì •ì±… ì ìš©"
    },
    "balancing": {
      "season_system": true,
      "season_config": {
        "duration_days": 90,
        "start_date": "2024-01-01",
        "end_date": "2024-03-31",
        "season_name": "Spring 2024"
      },
      "partial_reset_on_season_end": {
        "enabled": true,
        "reset_target": [
          "season_exp",
          "ranking",
          "season_rewards",
          "season_badges"
        ],
        "preserve_target": [
          "level",
          "total_exp",
          "permanent_rewards",
          "permanent_badges"
        ],
        "season_rewards": {
          "top_10": "season_champion_badge",
          "top_50": "season_elite_badge",
          "top_100": "season_achiever_badge"
        },
        "note": "ì‹œì¦Œë³„ ë¦¬ì…‹ ëŒ€ìƒ ì„¸ë¶„í™” ë° ë³´ìƒ ê´€ë¦¬"
      },
      "new_user_boost": {
        "enabled": true,
        "multiplier": 1.5,
        "duration_days": 7,
        "adaptive_duration": true,
        "note": "ì‹ ê·œ ìœ ì € ë¶€ìŠ¤í„° ê¸°ê°„ ìƒí™©ì— ë”°ë¼ ì¡°ì • ê°€ëŠ¥"
      },
      "power_user_penalty": {
        "enabled": true,
        "threshold": 1000,
        "penalty_rate": 0.1,
        "description": "ê³¼ë„í•œ í™œë™ ì‚¬ìš©ìì— ëŒ€í•œ í˜ë„í‹°"
      },
      "note": "ì‹ ê·œ ì§„ì… ì¥ë²½ ì™„í™” ë° ì‹œì¦Œ ê²½ìŸ ìœ ì§€"
    },
    "extensibility": {
      "multi_track_levels": true,
      "tracks": [
        {
          "name": "community",
          "actions": ["post", "comment", "like"],
          "rewards": {
            "level_up": "community_badge",
            "milestone": "community_title"
          }
        },
        {
          "name": "workout",
          "actions": ["workout_log", "cheer_on_log"],
          "rewards": {
            "level_up": "workout_item",
            "milestone": "premium_content_access"
          }
        },
        {
          "name": "event",
          "actions": ["participate_event"],
          "rewards": {
            "level_up": "event_badge",
            "milestone": "limited_edition_item"
          }
        }
      ],
      "inter_track_interaction": {
        "enabled": true,
        "rules": [
          {
            "source_track": "workout",
            "target_track": "community",
            "effect": "bonus_exp",
            "description": "ìš´ë™ í™œë™ ì‹œ ì»¤ë®¤ë‹ˆí‹° í™œë™ ê²½í—˜ì¹˜ ì¼ë¶€ ë³´ë„ˆìŠ¤ ì œê³µ"
          }
        ],
        "note": "íŠ¸ë™ ê°„ ìƒí˜¸ì‘ìš© ë° ë³´ìƒ ì—°ê³„ ì§€ì›"
      },
      "note": "ë©€í‹° íŠ¸ë™ í™•ì¥ì„± ë° ìƒí˜¸ì‘ìš© ê°•í™”"
    },
    "api_endpoints": {
      "user_progress": {
        "get_user_level": "GET /api/level/user/{userId}",
        "get_user_progress": "GET /api/level/user/{userId}/progress",
        "get_user_rewards": "GET /api/level/user/{userId}/rewards",
        "get_user_milestones": "GET /api/level/user/{userId}/milestones",
        "security": {
          "authentication": "required",
          "authorization": "self_or_admin",
          "rate_limit": "standard"
        }
      },
      "actions": {
        "grant_exp": "POST /api/level/exp/grant",
        "check_cooldown": "GET /api/level/cooldown/{actionType}/{userId}",
        "validate_action": "POST /api/level/action/validate",
        "security": {
          "authentication": "required",
          "authorization": "self_or_admin",
          "rate_limit": "strict",
          "validation": "required"
        }
      },
      "rewards": {
        "claim_reward": "POST /api/level/rewards/claim",
        "get_available_rewards": "GET /api/level/rewards/available/{userId}",
        "get_reward_history": "GET /api/level/rewards/history/{userId}",
        "security": {
          "authentication": "required",
          "authorization": "self_or_admin",
          "rate_limit": "standard"
        }
      },
      "leaderboard": {
        "get_global_ranking": "GET /api/level/leaderboard/global",
        "get_season_ranking": "GET /api/level/leaderboard/season/{seasonId}",
        "get_track_ranking": "GET /api/level/leaderboard/track/{trackName}",
        "security": {
          "authentication": "optional",
          "rate_limit": "standard"
        }
      },
      "admin": {
        "update_level_config": "PUT /api/admin/level/config",
        "reset_user_progress": "POST /api/admin/level/reset/{userId}",
        "get_system_stats": "GET /api/admin/level/stats",
        "security": {
          "authentication": "required",
          "authorization": "admin_only",
          "rate_limit": "admin",
          "audit_logging": "required"
        }
      }
    },
    "database_schema": {
      "tables": {
        "user_levels": {
          "columns": [
            "id",
            "user_id",
            "level",
            "current_exp",
            "total_exp",
            "season_exp",
            "created_at",
            "updated_at"
          ],
          "indexes": ["user_id", "level", "total_exp"],
          "foreign_keys": ["user_id REFERENCES users(id)"],
          "note": "TypeORM ì—”í‹°í‹° êµ¬ì¡°ì— ë§ì¶¤"
        },
        "exp_history": {
          "columns": [
            "id",
            "user_id",
            "action_type",
            "exp_gained",
            "source",
            "metadata",
            "created_at"
          ],
          "indexes": ["user_id", "action_type", "created_at"],
          "foreign_keys": ["user_id REFERENCES users(id)"],
          "note": "ê²½í—˜ì¹˜ íšë“ ì´ë ¥ ì¶”ì "
        },
        "user_rewards": {
          "columns": [
            "id",
            "user_id",
            "reward_type",
            "reward_id",
            "claimed_at",
            "expires_at",
            "metadata"
          ],
          "indexes": ["user_id", "reward_type", "claimed_at"],
          "foreign_keys": ["user_id REFERENCES users(id)"],
          "note": "ì‚¬ìš©ì ë³´ìƒ ê´€ë¦¬"
        },
        "milestones": {
          "columns": [
            "id",
            "user_id",
            "milestone_type",
            "milestone_id",
            "achieved_at",
            "metadata"
          ],
          "indexes": ["user_id", "milestone_type", "achieved_at"],
          "foreign_keys": ["user_id REFERENCES users(id)"],
          "note": "ë§ˆì¼ìŠ¤í†¤ ë‹¬ì„± ê¸°ë¡"
        },
        "user_streaks": {
          "columns": [
            "id",
            "user_id",
            "streak_type",
            "current_count",
            "last_activity",
            "created_at",
            "updated_at"
          ],
          "indexes": ["user_id", "streak_type"],
          "foreign_keys": ["user_id REFERENCES users(id)"],
          "note": "ì—°ì† í™œë™ ì¶”ì  (ë¡œê·¸ì¸, ìš´ë™ ë“±)"
        }
      }
    },
    "integration_guide": {
      "existing_system_compatibility": {
        "authentication": {
          "jwt_integration": "ê¸°ì¡´ JWT í† í° ì‹œìŠ¤í…œ í™œìš©",
          "user_context": "req.user ê°ì²´ë¥¼ í†µí•œ ì‚¬ìš©ì ì •ë³´ ì ‘ê·¼",
          "middleware_reuse": "ê¸°ì¡´ authenticateToken ë¯¸ë“¤ì›¨ì–´ í™œìš©"
        },
        "database": {
          "typeorm_entities": "ê¸°ì¡´ ì—”í‹°í‹° êµ¬ì¡°ì™€ ì¼ê´€ì„± ìœ ì§€",
          "migration_strategy": "ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œìŠ¤í…œ í™œìš©",
          "connection_pool": "ê¸°ì¡´ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ ê³µìœ "
        },
        "security": {
          "rate_limiting": "ê¸°ì¡´ rateLimiter ë¯¸ë“¤ì›¨ì–´ í™•ì¥",
          "validation": "ê¸°ì¡´ validation ë¯¸ë“¤ì›¨ì–´ íŒ¨í„´ í™œìš©",
          "logging": "ê¸°ì¡´ Winston ë¡œê±° ì‹œìŠ¤í…œ í™œìš©"
        }
      },
      "implementation_phases": {
        "phase_1": {
          "name": "ê¸°ë³¸ ë ˆë²¨ ì‹œìŠ¤í…œ",
          "duration": "2-3ì£¼",
          "tasks": [
            "ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìƒì„±",
            "ê¸°ë³¸ ë ˆë²¨ ê³„ì‚° ë¡œì§",
            "ê²½í—˜ì¹˜ ë¶€ì—¬ ì‹œìŠ¤í…œ",
            "ê¸°ë³¸ ë³´ìƒ ì‹œìŠ¤í…œ"
          ]
        },
        "phase_2": {
          "name": "ê³ ê¸‰ ê¸°ëŠ¥",
          "duration": "3-4ì£¼",
          "tasks": ["ë§ˆì¼ìŠ¤í†¤ ì‹œìŠ¤í…œ", "ìŠ¤íŠ¸ë¦­ ì¶”ì ", "ì‹œì¦Œ ì‹œìŠ¤í…œ", "ë¦¬ë”ë³´ë“œ"]
        },
        "phase_3": {
          "name": "ìµœì í™” ë° ë³´ì•ˆ",
          "duration": "2-3ì£¼",
          "tasks": ["ì„±ëŠ¥ ìµœì í™”", "ë³´ì•ˆ ê°•í™”", "ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ", "A/B í…ŒìŠ¤íŠ¸"]
        }
      },
      "migration_notes": {
        "backward_compatibility": "ê¸°ì¡´ ì‚¬ìš©ì ë°ì´í„° ë³´ì¡´",
        "gradual_rollout": "ë‹¨ê³„ì  ê¸°ëŠ¥ í™œì„±í™”",
        "fallback_mechanism": "ì˜¤ë¥˜ ì‹œ ê¸°ì¡´ ì‹œìŠ¤í…œìœ¼ë¡œ ë³µê·€"
      }
    }
  }
}
