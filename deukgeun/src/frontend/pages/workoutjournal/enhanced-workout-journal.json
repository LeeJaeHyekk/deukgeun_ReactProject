{
  "enhanced_workout_journal_system": {
    "system_overview": {
      "name": "통합 운동일지 시스템",
      "version": "2.0",
      "integration_targets": [
        "existing_level_system",
        "machine_guide_system",
        "auth_system",
        "community_system"
      ],
      "core_features": [
        "workout_planning",
        "exercise_logging",
        "progress_tracking",
        "social_features",
        "analytics_and_insights"
      ]
    },
    "database_schema": {
      "WorkoutPlans": {
        "plan_id": "PRIMARY KEY",
        "user_id": "FOREIGN KEY -> Users",
        "name": "STRING",
        "description": "TEXT NULLABLE",
        "difficulty_level": "ENUM('beginner', 'intermediate', 'advanced')",
        "estimated_duration_minutes": "INTEGER",
        "target_muscle_groups": "JSON",
        "is_template": "BOOLEAN DEFAULT FALSE",
        "is_public": "BOOLEAN DEFAULT FALSE",
        "created_at": "DATETIME",
        "updated_at": "DATETIME"
      },
      "WorkoutPlanExercises": {
        "plan_exercise_id": "PRIMARY KEY",
        "plan_id": "FOREIGN KEY -> WorkoutPlans",
        "machine_id": "FOREIGN KEY -> Machine",
        "exercise_order": "INTEGER",
        "sets": "INTEGER",
        "reps_range": "JSON", // {"min": 8, "max": 12}
        "weight_range": "JSON NULLABLE", // {"min": 50, "max": 80}
        "rest_seconds": "INTEGER DEFAULT 90",
        "notes": "TEXT NULLABLE"
      },
      "WorkoutSessions": {
        "session_id": "PRIMARY KEY",
        "user_id": "FOREIGN KEY -> Users",
        "plan_id": "FOREIGN KEY -> WorkoutPlans NULLABLE",
        "gym_id": "FOREIGN KEY -> Gym NULLABLE",
        "session_name": "STRING",
        "start_time": "DATETIME",
        "end_time": "DATETIME NULLABLE",
        "total_duration_minutes": "INTEGER NULLABLE",
        "mood_rating": "INTEGER NULLABLE", // 1-5 scale
        "energy_level": "INTEGER NULLABLE", // 1-5 scale
        "notes": "TEXT NULLABLE",
        "status": "ENUM('in_progress', 'completed', 'paused', 'cancelled')",
        "created_at": "DATETIME",
        "updated_at": "DATETIME"
      },
      "ExerciseSets": {
        "set_id": "PRIMARY KEY",
        "session_id": "FOREIGN KEY -> WorkoutSessions",
        "machine_id": "FOREIGN KEY -> Machine",
        "set_number": "INTEGER",
        "reps_completed": "INTEGER",
        "weight_kg": "DECIMAL(5,2) NULLABLE",
        "duration_seconds": "INTEGER NULLABLE",
        "distance_meters": "DECIMAL(8,2) NULLABLE",
        "rpe_rating": "INTEGER NULLABLE", // Rate of Perceived Exertion 1-10
        "notes": "TEXT NULLABLE",
        "created_at": "DATETIME"
      },
      "WorkoutGoals": {
        "goal_id": "PRIMARY KEY",
        "user_id": "FOREIGN KEY -> Users",
        "goal_type": "ENUM('weight_lift', 'endurance', 'weight_loss', 'muscle_gain', 'strength', 'flexibility')",
        "target_value": "DECIMAL(10,2)",
        "current_value": "DECIMAL(10,2) DEFAULT 0",
        "unit": "STRING",
        "target_date": "DATE",
        "start_date": "DATE",
        "status": "ENUM('active', 'completed', 'paused', 'cancelled')",
        "progress_percentage": "DECIMAL(5,2) DEFAULT 0",
        "created_at": "DATETIME",
        "updated_at": "DATETIME"
      },
      "BodyMeasurements": {
        "measurement_id": "PRIMARY KEY",
        "user_id": "FOREIGN KEY -> Users",
        "measurement_date": "DATE",
        "weight_kg": "DECIMAL(5,2) NULLABLE",
        "body_fat_percentage": "DECIMAL(4,2) NULLABLE",
        "muscle_mass_kg": "DECIMAL(5,2) NULLABLE",
        "chest_cm": "DECIMAL(5,2) NULLABLE",
        "waist_cm": "DECIMAL(5,2) NULLABLE",
        "arms_cm": "DECIMAL(5,2) NULLABLE",
        "thighs_cm": "DECIMAL(5,2) NULLABLE",
        "calves_cm": "DECIMAL(5,2) NULLABLE",
        "notes": "TEXT NULLABLE",
        "created_at": "DATETIME"
      },
      "WorkoutTemplates": {
        "template_id": "PRIMARY KEY",
        "name": "STRING",
        "description": "TEXT",
        "category": "ENUM('strength', 'cardio', 'flexibility', 'mixed')",
        "difficulty_level": "ENUM('beginner', 'intermediate', 'advanced')",
        "estimated_duration_minutes": "INTEGER",
        "target_muscle_groups": "JSON",
        "is_system_template": "BOOLEAN DEFAULT FALSE",
        "created_by_user_id": "FOREIGN KEY -> Users NULLABLE",
        "usage_count": "INTEGER DEFAULT 0",
        "rating_average": "DECIMAL(3,2) NULLABLE",
        "created_at": "DATETIME",
        "updated_at": "DATETIME"
      },
      "WorkoutProgress": {
        "progress_id": "PRIMARY KEY",
        "user_id": "FOREIGN KEY -> Users",
        "machine_id": "FOREIGN KEY -> Machine",
        "metric_type": "ENUM('max_weight', 'max_reps', 'max_duration', 'max_distance')",
        "value": "DECIMAL(10,2)",
        "achieved_date": "DATE",
        "session_id": "FOREIGN KEY -> WorkoutSessions",
        "created_at": "DATETIME"
      },
      "WorkoutChallenges": {
        "challenge_id": "PRIMARY KEY",
        "name": "STRING",
        "description": "TEXT",
        "challenge_type": "ENUM('streak', 'volume', 'strength', 'endurance', 'social')",
        "target_value": "DECIMAL(10,2)",
        "unit": "STRING",
        "start_date": "DATE",
        "end_date": "DATE",
        "reward_exp": "INTEGER",
        "reward_badge": "STRING NULLABLE",
        "max_participants": "INTEGER NULLABLE",
        "current_participants": "INTEGER DEFAULT 0",
        "is_active": "BOOLEAN DEFAULT TRUE",
        "created_at": "DATETIME"
      },
      "UserChallenges": {
        "user_challenge_id": "PRIMARY KEY",
        "user_id": "FOREIGN KEY -> Users",
        "challenge_id": "FOREIGN KEY -> WorkoutChallenges",
        "current_progress": "DECIMAL(10,2) DEFAULT 0",
        "status": "ENUM('active', 'completed', 'failed')",
        "joined_at": "DATETIME",
        "completed_at": "DATETIME NULLABLE"
      },
      "WorkoutSocial": {
        "social_id": "PRIMARY KEY",
        "user_id": "FOREIGN KEY -> Users",
        "session_id": "FOREIGN KEY -> WorkoutSessions NULLABLE",
        "content_type": "ENUM('workout_share', 'achievement', 'motivation', 'question')",
        "content": "TEXT",
        "media_urls": "JSON NULLABLE",
        "privacy_level": "ENUM('public', 'friends', 'private')",
        "likes_count": "INTEGER DEFAULT 0",
        "comments_count": "INTEGER DEFAULT 0",
        "created_at": "DATETIME",
        "updated_at": "DATETIME"
      }
    },
    "api_endpoints": {
      "workout_management": {
        "GET /api/workouts/plans": "사용자의 운동 계획 목록",
        "POST /api/workouts/plans": "새 운동 계획 생성",
        "PUT /api/workouts/plans/:id": "운동 계획 수정",
        "DELETE /api/workouts/plans/:id": "운동 계획 삭제",
        "GET /api/workouts/sessions": "운동 세션 목록",
        "POST /api/workouts/sessions": "새 운동 세션 시작",
        "PUT /api/workouts/sessions/:id": "운동 세션 업데이트",
        "POST /api/workouts/sessions/:id/complete": "운동 세션 완료",
        "POST /api/workouts/sets": "운동 세트 기록",
        "GET /api/workouts/progress": "운동 진행 상황",
        "GET /api/workouts/analytics": "운동 분석 데이터"
      },
      "goals_and_measurements": {
        "GET /api/workouts/goals": "운동 목표 목록",
        "POST /api/workouts/goals": "새 목표 설정",
        "PUT /api/workouts/goals/:id": "목표 수정",
        "GET /api/workouts/measurements": "신체 측정 기록",
        "POST /api/workouts/measurements": "신체 측정 기록",
        "GET /api/workouts/measurements/chart": "측정 차트 데이터"
      },
      "templates_and_challenges": {
        "GET /api/workouts/templates": "운동 템플릿 목록",
        "POST /api/workouts/templates": "템플릿 생성",
        "GET /api/workouts/challenges": "운동 챌린지 목록",
        "POST /api/workouts/challenges/:id/join": "챌린지 참가",
        "GET /api/workouts/challenges/leaderboard": "챌린지 리더보드"
      },
      "social_features": {
        "GET /api/workouts/social/feed": "운동 소셜 피드",
        "POST /api/workouts/social/share": "운동 공유",
        "POST /api/workouts/social/:id/like": "좋아요",
        "POST /api/workouts/social/:id/comment": "댓글 작성"
      }
    },
    "frontend_components": {
      "pages": {
        "WorkoutJournalPage": "메인 운동일지 페이지",
        "WorkoutPlanPage": "운동 계획 관리",
        "WorkoutSessionPage": "운동 세션 기록",
        "WorkoutProgressPage": "진행 상황 및 분석",
        "WorkoutGoalsPage": "목표 설정 및 관리",
        "WorkoutTemplatesPage": "운동 템플릿",
        "WorkoutChallengesPage": "운동 챌린지",
        "WorkoutSocialPage": "소셜 피드"
      },
      "components": {
        "WorkoutPlanCard": "운동 계획 카드",
        "WorkoutSessionTimer": "운동 타이머",
        "ExerciseSetForm": "운동 세트 입력 폼",
        "ProgressChart": "진행 상황 차트",
        "GoalProgressBar": "목표 진행률 바",
        "WorkoutCalendar": "운동 캘린더",
        "ChallengeCard": "챌린지 카드",
        "WorkoutShareModal": "운동 공유 모달"
      },
      "hooks": {
        "useWorkoutPlans": "운동 계획 관리",
        "useWorkoutSessions": "운동 세션 관리",
        "useWorkoutProgress": "진행 상황 관리",
        "useWorkoutGoals": "목표 관리",
        "useWorkoutAnalytics": "운동 분석"
      }
    },
    "integration_with_existing_systems": {
      "level_system": {
        "exp_rules": {
          "workout_session_complete": {
            "base_exp": 25,
            "duration_bonus": "0.5 exp per minute",
            "intensity_bonus": "up to 10 exp based on RPE",
            "streak_bonus": "5 exp for consecutive days"
          },
          "goal_achievement": {
            "base_exp": 50,
            "difficulty_multiplier": "1.0-2.0 based on goal type"
          },
          "challenge_completion": {
            "base_exp": 100,
            "participation_bonus": "10 exp"
          }
        }
      },
      "machine_system": {
        "exercise_logging": "머신 가이드와 연동하여 운동 기록",
        "progress_tracking": "머신별 진행 상황 추적",
        "recommendations": "머신 기반 운동 추천"
      },
      "community_system": {
        "workout_sharing": "운동 기록 커뮤니티 공유",
        "achievement_sharing": "성취 공유",
        "motivation_system": "동기부여 시스템"
      }
    },
    "mobile_optimization": {
      "responsive_design": true,
      "offline_support": {
        "workout_logging": "오프라인 운동 기록",
        "data_sync": "온라인 복구 시 동기화"
      },
      "progressive_web_app": {
        "installable": true,
        "push_notifications": true,
        "background_sync": true
      }
    },
    "analytics_and_insights": {
      "personal_analytics": {
        "workout_frequency": "운동 빈도 분석",
        "strength_progress": "근력 진행 상황",
        "endurance_trends": "지구력 트렌드",
        "body_composition": "신체 조성 변화"
      },
      "recommendations": {
        "exercise_suggestions": "운동 추천",
        "rest_day_reminders": "휴식일 알림",
        "progressive_overload": "점진적 과부하 제안"
      }
    },
    "security_and_privacy": {
      "data_encryption": "민감한 건강 데이터 암호화",
      "privacy_controls": "개인정보 보호 설정",
      "gdpr_compliance": "GDPR 준수",
      "audit_logging": "데이터 접근 로그"
    },
    "performance_optimization": {
      "caching_strategy": {
        "workout_data": "Redis 캐싱",
        "user_preferences": "로컬 스토리지"
      },
      "data_compression": "운동 데이터 압축",
      "lazy_loading": "이미지 및 차트 지연 로딩"
    }
  }
}
