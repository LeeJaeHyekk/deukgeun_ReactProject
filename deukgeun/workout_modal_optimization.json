{
  "workout_modal_optimization": {
    "project": "Workout Modal System Optimization",
    "description": "워크아웃 모달 시스템 최적화 및 개선",
    "createdAt": "2025-01-27T00:00:00.000Z",
    "version": "1.0.0",

    "current_issues": {
      "problems": [
        "모달 상태 관리가 복잡함",
        "폼 검증 로직이 분산되어 있음",
        "재사용 가능한 컴포넌트 부족",
        "접근성(Accessibility) 부족",
        "반응형 디자인 미흡",
        "에러 처리 및 피드백 부족",
        "성능 최적화 필요"
      ],
      "improvement_areas": [
        "통합된 모달 상태 관리",
        "재사용 가능한 모달 컴포넌트",
        "향상된 폼 검증 시스템",
        "접근성 개선",
        "성능 최적화",
        "사용자 경험 개선"
      ]
    },

    "optimized_modal_system": {
      "core_components": {
        "BaseModal": {
          "description": "모든 모달의 기본 컴포넌트",
          "props": {
            "isOpen": "boolean",
            "onClose": "() => void",
            "title": "string",
            "size": "'sm' | 'md' | 'lg' | 'xl' | 'full'",
            "position": "'center' | 'top' | 'bottom'",
            "backdrop": "boolean",
            "closeOnBackdrop": "boolean",
            "closeOnEscape": "boolean",
            "showCloseButton": "boolean",
            "children": "ReactNode"
          },
          "features": [
            "접근성 지원 (ARIA)",
            "키보드 네비게이션",
            "포커스 트랩",
            "애니메이션",
            "반응형 디자인",
            "백드롭 클릭 처리",
            "ESC 키 처리"
          ]
        },
        "ModalHeader": {
          "description": "모달 헤더 컴포넌트",
          "props": {
            "title": "string",
            "subtitle": "string?",
            "icon": "ReactNode?",
            "actions": "ReactNode[]?",
            "onClose": "() => void"
          }
        },
        "ModalBody": {
          "description": "모달 본문 컴포넌트",
          "props": {
            "children": "ReactNode",
            "padding": "string",
            "scrollable": "boolean",
            "maxHeight": "string?"
          }
        },
        "ModalFooter": {
          "description": "모달 푸터 컴포넌트",
          "props": {
            "primaryAction": "ModalAction",
            "secondaryAction": "ModalAction?",
            "dangerAction": "ModalAction?",
            "isLoading": "boolean",
            "disabled": "boolean"
          }
        }
      },

      "workout_specific_modals": {
        "WorkoutPlanModal": {
          "modes": ["create", "edit", "view", "duplicate"],
          "sections": [
            {
              "id": "basic-info",
              "title": "기본 정보",
              "fields": [
                {
                  "name": "name",
                  "type": "text",
                  "label": "계획 이름",
                  "required": true,
                  "validation": {
                    "minLength": 1,
                    "maxLength": 100,
                    "pattern": "string"
                  }
                },
                {
                  "name": "description",
                  "type": "textarea",
                  "label": "설명",
                  "required": false,
                  "maxLength": 500
                },
                {
                  "name": "difficulty",
                  "type": "select",
                  "label": "난이도",
                  "required": true,
                  "options": [
                    { "value": "beginner", "label": "초급", "icon": "🌱" },
                    { "value": "intermediate", "label": "중급", "icon": "🔥" },
                    { "value": "advanced", "label": "고급", "icon": "💪" }
                  ]
                },
                {
                  "name": "estimatedDuration",
                  "type": "number",
                  "label": "예상 소요 시간 (분)",
                  "required": true,
                  "min": 5,
                  "max": 300
                }
              ]
            },
            {
              "id": "exercises",
              "title": "운동 목록",
              "type": "dynamic-list",
              "component": "ExerciseList",
              "features": [
                "운동 추가/삭제",
                "순서 변경 (드래그 앤 드롭)",
                "세트/횟수 설정",
                "휴식 시간 설정",
                "기구 선택"
              ]
            },
            {
              "id": "settings",
              "title": "설정",
              "fields": [
                {
                  "name": "isTemplate",
                  "type": "checkbox",
                  "label": "템플릿으로 저장"
                },
                {
                  "name": "isPublic",
                  "type": "checkbox",
                  "label": "공개 계획"
                },
                {
                  "name": "targetMuscleGroups",
                  "type": "multi-select",
                  "label": "타겟 근육군",
                  "options": ["가슴", "등", "어깨", "팔", "복근", "하체"]
                }
              ]
            }
          ],
          "actions": {
            "create": {
              "primary": "계획 생성",
              "secondary": "임시 저장",
              "danger": "취소"
            },
            "edit": {
              "primary": "수정 완료",
              "secondary": "변경사항 취소",
              "danger": "삭제"
            },
            "view": {
              "primary": "수정",
              "secondary": "복제",
              "danger": "삭제"
            }
          }
        },

        "WorkoutSessionModal": {
          "modes": ["create", "edit", "view", "active"],
          "sections": [
            {
              "id": "session-info",
              "title": "세션 정보",
              "fields": [
                {
                  "name": "name",
                  "type": "text",
                  "label": "세션 이름",
                  "required": true
                },
                {
                  "name": "planId",
                  "type": "select",
                  "label": "운동 계획",
                  "required": false,
                  "dataSource": "plans"
                },
                {
                  "name": "startTime",
                  "type": "datetime",
                  "label": "시작 시간",
                  "required": false
                }
              ]
            },
            {
              "id": "mood-energy",
              "title": "컨디션",
              "fields": [
                {
                  "name": "moodRating",
                  "type": "rating",
                  "label": "기분",
                  "max": 5,
                  "icons": ["😢", "😐", "😊", "😄", "🤩"]
                },
                {
                  "name": "energyLevel",
                  "type": "rating",
                  "label": "에너지 레벨",
                  "max": 5,
                  "icons": ["😴", "😪", "😐", "😊", "⚡"]
                }
              ]
            },
            {
              "id": "exercise-tracker",
              "title": "운동 트래커",
              "type": "dynamic",
              "component": "ExerciseTracker",
              "features": [
                "실시간 세트 기록",
                "무게/횟수 입력",
                "RPE 기록",
                "휴식 타이머",
                "진행률 표시"
              ]
            },
            {
              "id": "notes",
              "title": "메모",
              "fields": [
                {
                  "name": "notes",
                  "type": "textarea",
                  "label": "세션 메모",
                  "placeholder": "오늘 운동에 대한 메모를 작성하세요..."
                }
              ]
            }
          ],
          "actions": {
            "create": {
              "primary": "세션 시작",
              "secondary": "나중에 시작",
              "danger": "취소"
            },
            "active": {
              "primary": "세션 완료",
              "secondary": "일시정지",
              "danger": "세션 취소"
            }
          }
        },

        "WorkoutGoalModal": {
          "modes": ["create", "edit", "view"],
          "sections": [
            {
              "id": "goal-info",
              "title": "목표 정보",
              "fields": [
                {
                  "name": "title",
                  "type": "text",
                  "label": "목표 제목",
                  "required": true
                },
                {
                  "name": "description",
                  "type": "textarea",
                  "label": "목표 설명",
                  "required": false
                },
                {
                  "name": "type",
                  "type": "select",
                  "label": "목표 타입",
                  "required": true,
                  "options": [
                    { "value": "weight", "label": "무게", "icon": "🏋️" },
                    { "value": "reps", "label": "횟수", "icon": "🔢" },
                    { "value": "duration", "label": "시간", "icon": "⏱️" },
                    { "value": "frequency", "label": "빈도", "icon": "📅" },
                    { "value": "streak", "label": "연속", "icon": "🔥" }
                  ]
                }
              ]
            },
            {
              "id": "target-settings",
              "title": "목표 설정",
              "fields": [
                {
                  "name": "targetValue",
                  "type": "number",
                  "label": "목표 값",
                  "required": true,
                  "dynamicLabel": "목표 타입에 따라 변경"
                },
                {
                  "name": "unit",
                  "type": "text",
                  "label": "단위",
                  "required": true,
                  "dynamicOptions": "목표 타입에 따라 자동 설정"
                },
                {
                  "name": "deadline",
                  "type": "date",
                  "label": "목표 기한",
                  "required": false
                },
                {
                  "name": "currentValue",
                  "type": "number",
                  "label": "현재 값",
                  "required": false
                }
              ]
            },
            {
              "id": "progress-preview",
              "title": "진행률 미리보기",
              "type": "component",
              "component": "GoalProgressPreview",
              "features": ["진행률 시각화", "달성 예측", "남은 기간 표시"]
            }
          ],
          "actions": {
            "create": {
              "primary": "목표 생성",
              "secondary": "임시 저장",
              "danger": "취소"
            },
            "edit": {
              "primary": "수정 완료",
              "secondary": "변경사항 취소",
              "danger": "삭제"
            }
          }
        }
      },

      "form_components": {
        "FormField": {
          "description": "재사용 가능한 폼 필드 컴포넌트",
          "props": {
            "name": "string",
            "type": "FormFieldType",
            "label": "string",
            "required": "boolean",
            "error": "string?",
            "helpText": "string?",
            "disabled": "boolean",
            "validation": "ValidationRule[]"
          },
          "types": [
            "text",
            "textarea",
            "number",
            "select",
            "multi-select",
            "checkbox",
            "radio",
            "date",
            "datetime",
            "rating",
            "file"
          ]
        },
        "FormSection": {
          "description": "폼 섹션 컴포넌트",
          "props": {
            "title": "string",
            "subtitle": "string?",
            "collapsible": "boolean",
            "defaultExpanded": "boolean",
            "children": "ReactNode"
          }
        },
        "ValidationProvider": {
          "description": "폼 검증 제공자",
          "features": [
            "실시간 검증",
            "사용자 정의 검증 규칙",
            "에러 메시지 커스터마이징",
            "검증 상태 관리"
          ]
        }
      },

      "state_management": {
        "modalStore": {
          "state": {
            "activeModals": "Record<string, ModalState>",
            "modalHistory": "ModalHistory[]",
            "globalModalSettings": "GlobalModalSettings"
          },
          "actions": {
            "openModal": "(modalId: string, config: ModalConfig) => void",
            "closeModal": "(modalId: string) => void",
            "updateModal": "(modalId: string, updates: Partial<ModalState>) => void",
            "closeAllModals": "() => void",
            "goBack": "() => void"
          }
        },
        "formStore": {
          "state": {
            "formData": "Record<string, any>",
            "formErrors": "Record<string, string[]>",
            "formTouched": "Record<string, boolean>",
            "isSubmitting": "boolean"
          },
          "actions": {
            "setFieldValue": "(field: string, value: any) => void",
            "setFieldError": "(field: string, error: string) => void",
            "validateField": "(field: string) => void",
            "validateForm": "() => boolean",
            "resetForm": "() => void",
            "submitForm": "() => Promise<void>"
          }
        }
      },

      "accessibility_features": {
        "aria_labels": "모든 모달에 적절한 ARIA 라벨",
        "focus_management": "포커스 트랩 및 키보드 네비게이션",
        "screen_reader": "스크린 리더 지원",
        "keyboard_shortcuts": "키보드 단축키 지원",
        "high_contrast": "고대비 모드 지원"
      },

      "performance_optimizations": {
        "lazy_loading": "모달 컴포넌트 지연 로딩",
        "memoization": "React.memo 및 useMemo 사용",
        "virtualization": "긴 목록 가상화",
        "debouncing": "입력 디바운싱",
        "code_splitting": "모달별 코드 분할"
      },

      "user_experience": {
        "animations": "부드러운 진입/퇴장 애니메이션",
        "loading_states": "로딩 상태 표시",
        "error_handling": "사용자 친화적 에러 메시지",
        "success_feedback": "성공 피드백",
        "auto_save": "자동 저장 기능",
        "undo_redo": "실행 취소/다시 실행"
      }
    },

    "implementation_plan": {
      "phase_1": {
        "name": "기본 모달 시스템 구축",
        "tasks": [
          "BaseModal 컴포넌트 개발",
          "ModalHeader, ModalBody, ModalFooter 개발",
          "접근성 기능 구현",
          "애니메이션 시스템 구축"
        ],
        "estimated_hours": 8
      },
      "phase_2": {
        "name": "폼 시스템 구축",
        "tasks": [
          "FormField 컴포넌트 개발",
          "FormSection 컴포넌트 개발",
          "ValidationProvider 개발",
          "폼 상태 관리 시스템 구축"
        ],
        "estimated_hours": 6
      },
      "phase_3": {
        "name": "워크아웃 특화 모달 개발",
        "tasks": [
          "WorkoutPlanModal 개발",
          "WorkoutSessionModal 개발",
          "WorkoutGoalModal 개발",
          "동적 폼 필드 구현"
        ],
        "estimated_hours": 10
      },
      "phase_4": {
        "name": "고급 기능 및 최적화",
        "tasks": [
          "성능 최적화",
          "고급 접근성 기능",
          "사용자 경험 개선",
          "테스트 및 문서화"
        ],
        "estimated_hours": 6
      }
    },

    "total_workload": {
      "total_hours": 30,
      "phases": 4,
      "priority": "high",
      "dependencies": [
        "기존 Zustand 스토어와 통합",
        "TypeScript 타입 안전성",
        "기존 API 엔드포인트 호환성"
      ]
    }
  }
}
